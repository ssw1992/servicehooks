"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const s=require("vue"),g=({getSecret:i,intevalTimeout:c=3*1e3,timeout:f=180*1e3,verifyLogin:v,onPass:u})=>{const n=s.ref(!1),o=s.ref(!1);let a,l=0,r;const w=async()=>{n.value=!1,l=0,o.value=!0;try{r=null,r=await i()}catch(e){throw console.log("获取密钥失败",e),new Error("获取密钥失败")}o.value=!1,r&&(a=window.setInterval(async()=>{if(l+=c,l>f)return t();try{const e=await v(r);e&&(t(),u&&u(e))}catch(e){throw t(),console.error("校验登录失败",e),new Error("校验登录失败")}},c))},t=()=>{n.value=!0,a&&clearInterval(a)};return s.onUnmounted(t),{isTimeout:n,isLoading:o,start:w}};exports.useScanLogin=g;
//# sourceMappingURL=index2.cjs.map
