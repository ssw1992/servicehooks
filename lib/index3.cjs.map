{"version":3,"file":"index3.cjs","sources":["../packages/subscribe/index.ts"],"sourcesContent":["import { onUnmounted } from \"vue\";\r\n\r\n\r\nexport const useSubscribe = () => {\r\n  const theArr: any[] = [];\r\n\r\n  const subscribe = (cb: () => any) => {\r\n    if (theArr.includes(cb) || !(typeof cb === \"function\")) {\r\n      return;\r\n    }\r\n    theArr.push(cb);\r\n  };\r\n  const publish = () => {\r\n    theArr.forEach((cb) => cb());\r\n  };\r\n  const unsubscribe = (cb: () => any) => {\r\n    const index = theArr.findIndex(cb);\r\n    if (index > -1) {\r\n      theArr.splice(index, 1);\r\n    }\r\n  };\r\n\r\n  onUnmounted(() => {\r\n    theArr.length = 0;\r\n  });\r\n\r\n  return {\r\n    subscribe,\r\n    publish,\r\n    unsubscribe\r\n  };\r\n};\r\n"],"names":["useSubscribe","theArr","subscribe","cb","publish","unsubscribe","index","onUnmounted"],"mappings":"uGAGaA,EAAe,IAAM,CAChC,MAAMC,EAAgB,CAAA,EAEhBC,EAAaC,GAAkB,CAC/BF,EAAO,SAASE,CAAE,GAAO,OAAOA,GAAO,YAG3CF,EAAO,KAAKE,CAAE,CAAA,EAEVC,EAAU,IAAM,CACpBH,EAAO,QAASE,GAAOA,EAAI,CAAA,CAAA,EAEvBE,EAAeF,GAAkB,CAC/B,MAAAG,EAAQL,EAAO,UAAUE,CAAE,EAC7BG,EAAQ,IACHL,EAAA,OAAOK,EAAO,CAAC,CACxB,EAGFC,OAAAA,EAAAA,YAAY,IAAM,CAChBN,EAAO,OAAS,CAAA,CACjB,EAEM,CACL,UAAAC,EACA,QAAAE,EACA,YAAAC,CAAA,CAEJ"}